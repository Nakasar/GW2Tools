<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="theme-color" content="#000000">
  <meta name="description" content="">
  <meta name="author" content="Kavin 'Nakasar' Thizy">

  <title>Documentation - Outils RP</title>

  <link rel="icon" href="/src/favicon.ico" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <link rel="stylesheet" href="/components/style_global.css">
  <link rel="stylesheet" href="documentation.css">

</head>
<body>
  <header>
    <div id="navigation">
    </div>
  </header>

  <div class="container" id="page">
    <article>
      <h1>Boîte à Outils GW2RP</h1>

      <h2>A propos</h2>
      <p>La <strong>Boîte à Outils GW2RP</strong> est un ensemble d'outils conçus pour Guild Wars 2 et la pratique du jeu de rôle sur MMORPG.</p>
      <p>Pour les petits curieux et férus de l'informatique, l'interface sur laquelle vous vous trouvez utilise Bootstrap pour l'architecture et Leaflet pour la carte. L'API tourne sous Node.js (express) avec une base MongoDB (mongoose).</p>

      <h2>Utilisation de la boîte à Outil</h2>
      <h3>Création de compte</h3>
      <p>
        Pour accéder à l'ensemble des fonctionnalités, vous devez vous enregistrer sur la boîte à outils à partir de l'onglet "Se connecter".
        <br>
        Le pseudo et le nom de compte gw2 doivent être uniques, et votre adresse mail doit être valide pour confirmer votre compte.
      </p>

      <h3>Le Cartographe</h3>
      <p>
        Le cartographe est situé à l'adresse <code>https://gw2rp-tools.ovh/cartographe</code>.
        <br>
        Clic droit sur la carte permet d'ajouter un nouveau marqueur (vous devez être connecté). Les marqueurs peuvent être une rumeur, un évènement, ou un lieu permanent.
        <br>
        Les rumeurs sont supprimées au bout d'une semaine, les évènements le lendemain de leur date de fin, et les lieux permanent au bout de trois mois. Pour prolonger un marqueur, il suffit de le modifier, ou d'utiliser le bouton "rafraîchir" dans la barre lattérale gauche.
        <br>
        Un clic gauche sur un marqueur ouvre la barre lattérale qui contient les informations à son sujet. Vous pouvez modifier, supprimer le marqueur s'il vous appartient. Pour les évènements, vous pouvez indiquer votre éventuelle participation.
        <br>
        Le panneau à droite permet de cacher certains marqueurs de la carte à l'aide de filtres.
      </p>

      <h3>Les Personnages<h3>
      <p>
        L'index des personnages est situé à l'adresse <code>https://gw2rp-tools.ovh/pages/characters</code>.
        <br>
        Vous pouvez consulter la liste des personnages, effectuer des recherches sur les noms ou une recherche avancée par tags. Vous pouvez ajouter un personnage si son nom n'existe pas déjà.
        <br>
        Vous pouvez modifier la description de votre personnage, les détails de son apparence, ainsi que ses compétences et caractéristiques.
        <br>
        Il n'y a pas de système de jeu défini, vous êtes libre d'indiquer les valeurs que vous souhaitez. L'ensemble des tables de caractéristiques et de compétences sont accessibles par le bot discord pour des jets de dés automatiques.
      </p>

      <h3>Mon Compte</h3>
      <p>
        Modifiez les paramètres de votre comptre (mot de passe, mail, pseudo, compte gw2) à l'adresse <code>https://gw2rp-tools.ovh/pages/account</code>.
        <br>
        Vous pouvez également consulter la liste de toutes vos créations, les prolonger, et une liste des évènements auxquels vous participez.
      </p>

      <h2>Utilisation de l'API</h2>
      <p>La Boîte à Outils récupère ses données et gère ses utilisateur à l'aide d'une API. La documentation ci-dessous présente les différentes adresses qui permettent de récupérer et modifier ces données.</p>
      <p>La racine de l'api est accessible à <code>https://gw2rp-tools.ovh/api</code>.</p>

      <h3>Liste des endpoints</h3>
      <table class="table">
        <tr>
          <th>Endpoint</th>
          <th>Description</th>
          <th>Méthodes</th>
        </tr>
        <tr>
          <td>/me</td>
          <td>Vérifie la validition du token de l'utilisateur courant.</td>
          <td><span class="badge badge-primary">POST</span></td>
        </tr>
        <tr>
          <td>/signup</td>
          <td>Ajoute un nouvel utilisateur (le nom d'utilisateur doit être unique).</td>
          <td><span class="badge badge-primary">POST</span></td>
        </tr>
        <tr>
          <td>/login</td>
          <td>Authentifie un utilisateur et retourne un token d'une validité d'un jour.</td>
          <td><span class="badge badge-primary">POST</span></td>
        </tr>
        <tr>
          <td>/users</td>
          <td>End point des utilisateurs.</td>
          <td><span class="badge badge-success">GET</span> <span class="badge badge-primary">POST</span> <span class="badge badge-warning">PUT</span> <span class="badge badge-danger">DELETE</span></td>
        </tr>
        <tr>
          <td>/events</td>
          <td>End point des événements.</td>
          <td><span class="badge badge-success">GET</span> <span class="badge badge-primary">POST</span> <span class="badge badge-warning">PUT</span> <span class="badge badge-danger">DELETE</span></td>
        </tr>
        <tr>
          <td>/locations</td>
          <td>End point des lieux permanents.</td>
          <td><span class="badge badge-success">GET</span> <span class="badge badge-primary">POST</span> <span class="badge badge-warning">PUT</span> <span class="badge badge-danger">DELETE</span></td>
        </tr>
        <tr>
          <td>/rumours</td>
          <td>End point des rumeurs.</td>
          <td><span class="badge badge-success">GET</span> <span class="badge badge-primary">POST</span> <span class="badge badge-warning">PUT</span> <span class="badge badge-danger">DELETE</span></td>
        </tr>
      </table>

      <h3>Détails des endpoints</h3>
      <p>Toutes les réponses de l'API contiennent le mot-clé <code>{ success: true/false }</code> pour indiquer si la requête a réussi ou non.</p>
      <p>Les endpoints indiqués <span class="authed badge badge-dark">auth</span> nécessite la présence d'un token valide de l'utilisateur dans la requête : <code>{ token: <em>token</em> }</code>.</p>
      <table class="table">
        <tr>
          <th>/me</th>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span></td>
          <td><code>{ id: <em>id utilisateur</em>, token: <em>token utilisateur</em> }</code></td>
          <td>Vérifie la validité du token de l'utilisateur et retourne des infos au sujet de l'utilisateur.</td>
          <td><code>token, user : { nick_name, _id, admin, gw2_account }</code></td>
        </tr>

        <tr>
          <th>/signup</th>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span></td>
          <td><code>{ nick_name, password, gw2_name, gw2_id, email }</code></td>
          <td>Ajoute un nouvel utilisateur au système.</td>
          <td><code>user : { nick_name, _id, admin, gw2_account }</code></td>
        </tr>

        <tr>
          <th>/login</th>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span></td>
          <td><code>{ nick_name, password }</code></td>
          <td>Authentifie un utilisateur.</td>
          <td><code>user : { nick_name, _id, admin, gw2_account }, token</code></td>
        </tr>

        <tr>
          <th>/users</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Liste des utilisateur en base.</td>
          <td><code>users: { _id, nick_name, gw2_account }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ nick_name, password, gw2_name, gw2_id, email }</code></td>
          <td>Ajoute un nouvel utilisateur en base.</td>
          <td><code>user: { _id, nick_name, gw2_account, admin }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span> <span class="badge badge-dark">admin</span></td>
          <td></td>
          <td>Supprime l'ensemble des utilisateurs en base</td>
          <td></td>
        </tr>

        <tr>
          <th>/users/:userId</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Affiche des données supplémentaires sur l'utilisateur indiqué.</td>
          <td><code>users: { _id, nick_name, gw2_account, email <em>(si le token correspond à cet utilisateur)</em> }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td>Champs parmi : <code>{ <em>old_password</em>, <em>new_password</em>, <em>username</em>, <em>gw2_account</em> }</code><br>Précisez : <code>?general=true</code> ou <code>?security=true</code></td>
          <td>Mets à jour l'utilisateur (si le token appartient à cet utilisateur).
            <br><code><em>general</em></code> pour les infos générales
            <br><code><em>general</em></code> pour le mot de passe)
          </td>
          <td></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Supprime cet utilisateur s'il s'agit de celui du token (ou admin).</td>
          <td></td>
        </tr>

        <tr>
          <th>/events</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td><code>?next=<em>xx</em></code></td>
          <td>Liste des évents en base.<br><code>next</code> retourne les <code><em>xx</em></code> prochains évents.</td>
          <td><code>events: [event]</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{  }</code></td>
          <td>Ajoute un nouvel événement qui appartiendra à cet utilisateur.</td>
          <td><code>event: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span> <span class="badge badge-dark">admin</span></td>
          <td></td>
          <td>Supprime l'ensemble des événements en base</td>
          <td></td>
        </tr>

        <tr>
          <th>/events/:eventId</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td></td>
          <td>Retourne les détails de l'évènement indiqué par l'id s'il existe.</td>
          <td><code>event: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{  }</code></td>
          <td>Met à jour l'évènement (s'il appartient à cet utilisateur ).</td>
          <td><code>event: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Supprime l'événement indiqué s'il appartient à l'utilisateur du token (ou admin).</td>
          <td></td>
        </tr>

        <tr>
          <th>/locations</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td></td>
          <td>Liste des lieux permaments en base.</td>
          <td><code>locations: [location]</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ name, description, contact, types: [string], coord: [x, y], icon, category, hours, site }</code></td>
          <td>Ajoute un nouveau lieu permanent qui appartiendra à cet utilisateur.</td>
          <td><code>location: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span> <span class="badge badge-dark">admin</span></td>
          <td></td>
          <td>Supprime l'ensemble des lieux permanents en base</td>
          <td></td>
        </tr>

        <tr>
          <th>/locations/:locationId</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td></td>
          <td>Retourne le lieu permament indiqué s'il existe..</td>
          <td><code>location: { _id ... }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{  }</code></td>
          <td>Met à jour le lieu permanent (s'il appartient à cet utilisateur ).</td>
          <td><code>location: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Supprime ce lieu permanent s'il appartient à l'utilisateur du token (ou admin).</td>
          <td></td>
        </tr>

        <tr>
          <th>/rumours</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td><code>?latest=<em>xx</em></code></td>
          <td>Liste des rumeurs en base.<br><code>next</code> retourne les <code><em>xx</em></code> dernières rumeurs.</td>
          <td><code>rumours: [rumour]</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ name, text, contact, coord: [x, y], category, site }</code></td>
          <td>Ajoute une nouvelle rumeur qui appartiendra à cet utilisateur.</td>
          <td><code>rumour: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span> <span class="badge badge-dark">admin</span></td>
          <td></td>
          <td>Supprime l'ensemble des rumeurs en base</td>
          <td></td>
        </tr>

        <tr>
          <th>/rumours/:rumourId</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td></td>
          <td>Retourne la rumeur indiquée si elle existe..</td>
          <td><code>rumour: { _id ... }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{  }</code></td>
          <td>Met à jour la rumeur (si elle appartient à cet utilisateur ).</td>
          <td><code>rumour: { _id ...}</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Supprime cette rumeur si elle appartient à l'utilisateur du token (ou admin).</td>
          <td></td>
        </tr>

        <tr>
          <th>/characters</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td><code>?search_terms=<em>xx xxx xxx</em></code></td>
          <td>Liste des personnages en base, correspondants aux termes de recherche si présents.</td>
          <td><code>characters: [{ _id: String, name: String, description: String, appearance: String, owner: String, created_date: Date, last_update: Date, image_url: String }]</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-primary">POST</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code><code>{ name: String, description: String, appearance: String, image_url: String }</code></td>
          <td>Ajoute un nouveau personnage qui appartiendra à cet utilisateur.</td>
          <td><code>character: { _id: String, name: String, description: String, appearance: String, owner: String, created_date: Date, last_update: Date, image_url: String, skills: [], caracteristics: [] }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span> <span class="badge badge-dark">admin</span></td>
          <td></td>
          <td>Supprime l'ensemble des personnages en base</td>
          <td></td>
        </tr>

        <tr>
          <th>/characters/:characterId</th>
        </tr>
        <tr>
          <td><span class="badge badge-success">GET</span></td>
          <td></td>
          <td>Retourne le personnage indiqué s'il existe..</td>
          <td><code>character: { _id: String, name: String, description: String, appearance: String, owner: String, created_date: Date, last_update: Date, image_url: String, skills: [], caracteristics: [] }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td>Champs au choix parmi : <code>{ description: String, appearance: String, image_url: String, name: String }</code></td>
          <td>Met à jour le personnage (s'il appartient à cet utilisateur ).</td>
          <td><code>character: { _id: String, name: String, description: String, appearance: String, owner: String, created_date: Date, last_update: Date, image_url: String, skills: [], caracteristics: [] }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td></td>
          <td>Supprime ce personnage s'il appartient à l'utilisateur du token (ou admin).</td>
          <td></td>
        </tr>

        <tr>
          <th>/characters/:characterId/caracs</th>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ caracteristics: [{ name: String, value: Number, remark: String }] }</code></td>
          <td>Met à jour la lisite des caractéristiques du personnage (s'il appartient à cet utilisateur ).</td>
          <td><code>character: { _id: String, name: String, description: String, appearance: String, owner: String, created_date: Date, last_update: Date, image_url: String, skills: [], caracteristics: [] }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ caracteristics: [String] }</code></td>
          <td>Supprime les caractéristiques nommées dans la liste de ce personnage s'il appartient à l'utilisateur du token (ou admin).</td>
          <td></td>
        </tr>

        <tr>
          <th>/characters/:characterId/skills</th>
        </tr>
        <tr>
          <td><span class="badge badge-warning">PUT</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ skills: [{ name: String, value: Number, remark: String }] }</code></td>
          <td>Met à jour la lisite des compétences du personnage (s'il appartient à cet utilisateur ).</td>
          <td><code>character: { _id: String, name: String, description: String, appearance: String, owner: String, created_date: Date, last_update: Date, image_url: String, skills: [], caracteristics: [] }</code></td>
        </tr>
        <tr>
          <td><span class="badge badge-danger">DELETE</span> <span class="authed badge badge-dark">auth</span></td>
          <td><code>{ skills: [String] }</code></td>
          <td>Supprime les compétences nommées dans la liste de ce personnage s'il appartient à l'utilisateur du token (ou admin).</td>
          <td></td>
        </tr>
      </table>
    </article>
  </div>

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

  <script src="/components/base.js"></script>
  <script src="/components/connect.js"></script>

  <script>
  $('#navigation').load("/components/header.html", function() {
    $('#nav-documentation').addClass('active');
    establishConnection();
  });
  </script>

  <script>
  </script>

</body>
</html>
